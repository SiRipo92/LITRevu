{# Reusable ticket card. Expects: ticket, request #}
<article class="border rounded-lg p-6 shadow-sm bg-white">
  <div class="flex justify-between text-sm text-gray-600 mb-2">
    <p>
      {% if ticket.user_id == request.user.id %}
        Vous avez demandé une critique
      {% else %}
        {{ ticket.user.username }} a demandé une critique
      {% endif %}
    </p>
    <p>{{ ticket.time_created|date:"H:i, d F Y" }}</p>
  </div>

  <h2 class="text-md font-semibold text-gray-900 mb-2">
  {{ ticket.title }}
  <span class="text-gray-700"> — {{ ticket.display_author }}</span>
</h2>

  {% if ticket.description %}
    <p class="text-gray-800 mb-4">{{ ticket.description }}</p>
  {% endif %}

  {% if ticket.image %}
    <div class="mt-2">
      <img src="{{ ticket.image.url }}" alt="Image associée" class="max-h-64 rounded">
    </div>
  {% endif %}

  {% if show_actions %}
    <div class="flex justify-end mt-4 gap-4">
      {# ===== FEED MODE ===== #}
        {% if not allow_edit_delete %}
            {% if allow_review %}
                <a href="{% url 'reviews:create_review' ticket.id %}"
                   class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
                   Créer une critique
                </a>
            {% else %}
                <span class="text-gray-400 italic">Critique déjà créée</span>
            {% endif %}
        {% endif %}

        {# ===== MES POSTS MODE ===== #}
        {% if allow_edit_delete %}
          <a href="{% url 'reviews:edit_ticket' ticket.id %}"
             class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
             Modifier
          </a>
          <a href="{% url 'reviews:delete_ticket' ticket.id %}"
             class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">
             Supprimer
          </a>
        {% endif %}

      </div>
    {% endif %}
</article>